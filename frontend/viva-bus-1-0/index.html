<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/png" sizes="96x96" href="/assets/favicon/favicon-96x96.png" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/assets/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="/assets/favicon/site.webmanifest" />
    <title>Viva Bus 1.0 | Prototipo Viva</title>
    <link rel="stylesheet" href="../assets/css/global.css" />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
<div class="page-wrapper"></div>
<div class="bus-scale-host" id="busScaleHost">
<div class="viva-bus-1-0" id="busCanvas">
  <div class="rectangle-41"></div>
  <div class="haz-tu-viaje-m-s-sencillo">Haz tu viaje más sencillo</div>
  <div class="te-ofrecemos-conectividad-total-en-tu-viaje">
    Te ofrecemos conectividad total en tu viaje
  </div>
  <div
    class="adquiere-viva-bus-para-tu-traslado-desde-la-ciudad-al-aeropuerto-y-o-desde-el-aeropuerto-a-tu-destino-final-elige-la-ruta-que-deseas-en-la-secci-n-de-abajo"
  >
    Adquiere Viva Bus para tu traslado desde la ciudad al aeropuerto y / o desde
    el aeropuerto a tu destino final.
    <br />
    <br />
    Elige la ruta que deseas en la sección de abajo.
  </div>
  <div class="viva-bus">Viva Bus</div>
  <div class="line-4"></div>
  <div class="line-5"></div>
  <div class="total2">Total</div>
  <div class="_0" id="bus-total-amount">$0</div>
  <div class="mxn">MXN</div>
  <div class="canc-n">Cancún</div>
  <div class="group-14">
    <div class="rectangle-42"></div>
    <div class="elige-la-ruta">Elige la ruta</div>
    <div class="seleccionar">Seleccionar</div>
  </div>
  <div class="_000">$000</div>
  <div class="mxn2">MXN</div>
  <div class="es-tu-primera-vez-con-nosotros">
    ¿Es tu primera vez con nosotros?
  </div>
  <div class="registrate-y-escoge-tu-asiento-sin-costo">
    Registrate y escoge tu asiento sin costo
  </div>
  <div class="iniciar-sesi-n">Iniciar sesión</div>
  <div class="rectangle-93"></div>
  <div class="no-gracias">No, gracias</div>
  <div class="rectangle-92"></div>
  <div class="confirmar">Confirmar</div>
  <div class="eligeel-autob-s-que-deseas-en-la-secci-n-de-abajo">
    Eligeel autobús que deseas en la sección de abajo.
  </div>
  <div class="rectangle-34"></div>
  <div class="autob-s-familiar">Autobús familiar</div>
  <div class="rectangle-32"></div>
  <div class="rectangle-35"></div>
  <div class="rectangle-38"></div>
  <div class="autob-s-en-pareja">Autobús en pareja</div>
  <div class="rectangle-36"></div>
  <div class="rectangle-39"></div>
  <div class="autob-s-normal">Autobús normal</div>

  <button type="button" class="bus-option-card family" data-option="familiar" data-price="289" data-label="Autobús familiar">
    <span class="bus-option-title">Autobús familiar</span>
    <span class="bus-option-price">$289 MXN promo</span>
  </button>

  <button type="button" class="bus-option-card couple" data-option="pareja" data-price="229" data-label="Autobús en pareja">
    <span class="bus-option-title">Autobús en pareja</span>
    <span class="bus-option-price">$229 MXN promo</span>
  </button>

  <button type="button" class="bus-option-card normal" data-option="normal" data-price="179" data-label="Autobús normal">
    <span class="bus-option-title">Autobús normal</span>
    <span class="bus-option-price">$179 MXN promo</span>
  </button>
</div>
</div>

<script>
  (function () {
    const baseWidth = 595;
    const baseHeight = 1297;
    const host = document.getElementById('busScaleHost');
    const canvas = document.getElementById('busCanvas');
    const totalAmount = document.getElementById('bus-total-amount');
    const optionCards = document.querySelectorAll('.bus-option-card');
    let selectedBusOption = null;

    function applyResponsiveScale() {
      if (!host || !canvas) {
        return;
      }

      const availableWidth = Math.max(280, window.innerWidth - 16);
      const scale = Math.min(1, availableWidth / baseWidth);

      host.style.width = `${Math.round(baseWidth * scale)}px`;
      host.style.height = `${Math.round(baseHeight * scale)}px`;
      canvas.style.transform = `scale(${scale})`;
    }

    optionCards.forEach((card) => {
      card.addEventListener('click', () => {
        const option = card.dataset.option || 'normal';
        const label = card.dataset.label || 'Autobús';
        const price = Number(card.dataset.price || 0);

        selectedBusOption = { option, label, price };

        optionCards.forEach((item) => item.classList.remove('is-selected'));
        card.classList.add('is-selected');

        if (totalAmount) {
          totalAmount.textContent = `$${selectedBusOption.price}`;
        }

        if (window.parent && window.parent !== window) {
          window.parent.postMessage({
            type: 'viva-intermodal-selection',
            service: 'bus',
            option: selectedBusOption.option,
            label: selectedBusOption.label,
            price: selectedBusOption.price,
          }, '*');
        }
      });
    });

    applyResponsiveScale();
    window.addEventListener('resize', applyResponsiveScale);
  })();
</script>
  </body>
</html>
